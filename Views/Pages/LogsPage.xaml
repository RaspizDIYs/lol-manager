<UserControl x:Class="LolManager.Views.Pages.LogsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             xmlns:conv="clr-namespace:LolManager.Converters"
             mc:Ignorable="d">
    <UserControl.Resources>
        <conv:LogTypeConverter x:Key="LogTypeConverter" />
    </UserControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="6">
            <TextBlock Text="Ð›Ð¾Ð³Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ" Margin="6,0,0,0" FontWeight="SemiBold"/>
        </StackPanel>
        
        <!-- Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ -->
        <Grid Grid.Row="1" Margin="12,10,12,10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð¿Ð¾ Ñ‚Ð¸Ð¿Ð°Ð¼ Ð»Ð¾Ð³Ð¾Ð² -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                <TextBlock Text="Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹:" VerticalAlignment="Center" FontWeight="SemiBold" Margin="0,0,15,0"/>
                <CheckBox Content="ðŸ” LOGIN" IsChecked="{Binding LogFilters.ShowLogin}" Margin="0,0,15,0" ToolTip="ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸ Ð²Ñ…Ð¾Ð´Ð° Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ"/>
                <CheckBox Content="ðŸŒ HTTP" IsChecked="{Binding LogFilters.ShowHttp}" Margin="0,0,15,0" ToolTip="ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ HTTP Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹"/>
                <CheckBox Content="ðŸ–±ï¸ UI" IsChecked="{Binding LogFilters.ShowUi}" Margin="0,0,15,0" ToolTip="ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ UI ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ"/>
                <CheckBox Content="âš™ï¸ PROC" IsChecked="{Binding LogFilters.ShowProcess}" Margin="0,0,15,0" ToolTip="ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð²"/>
                <CheckBox Content="â„¹ï¸ INFO" IsChecked="{Binding LogFilters.ShowInfo}" Margin="0,0,15,0" ToolTip="ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ"/>
                <CheckBox Content="âš ï¸ WARN" IsChecked="{Binding LogFilters.ShowWarning}" Margin="0,0,15,0" ToolTip="ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ñ"/>
                <CheckBox Content="âŒ ERROR" IsChecked="{Binding LogFilters.ShowError}" Margin="0,0,15,0" ToolTip="ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¾ÑˆÐ¸Ð±ÐºÐ¸"/>
            </StackPanel>
            
            <!-- Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð»Ð¾Ð³Ð°Ð¼Ð¸ -->
            <StackPanel Grid.Row="1" Orientation="Horizontal">
                <ui:Button Content="Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð²ÑÑ‘" Command="{Binding SelectAllFiltersCommand}" Appearance="Transparent" Margin="0,0,10,0"/>
                <ui:Button Content="Ð¡Ð½ÑÑ‚ÑŒ Ð²ÑÑ‘" Command="{Binding ClearAllFiltersCommand}" Appearance="Transparent" Margin="0,0,10,0"/>
                <Separator Margin="5,0"/>
                <ui:Button Content="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»" Command="{Binding OpenLogFileCommand}" Appearance="Transparent" Margin="10,0,10,0"/>
                <ui:Button Content="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸" Command="{Binding ClearLogsCommand}" Appearance="Secondary" Margin="0,0,10,0"/>
                <ui:Button Content="ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" Command="{Binding RefreshLogsCommand}" Appearance="Primary" Margin="0,0,10,0"/>
            </StackPanel>
        </Grid>
        
        <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð»Ð¾Ð³Ð¾Ð² -->
        <ListBox Grid.Row="2" ItemsSource="{Binding FilteredLogLines}" Background="Transparent" BorderThickness="0" SelectionMode="Extended" x:Name="LogListBox" ScrollViewer.CanContentScroll="True">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <TextBlock Text="{Binding}" FontFamily="Consolas" FontSize="11" TextWrapping="Wrap" Margin="4,2"/>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    <Setter Property="Padding" Value="2"/>
                    <Style.Triggers>
                        <!-- Ð¦Ð²ÐµÑ‚Ð¾Ð²Ð¾Ðµ ÐºÐ¾Ð´Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¾ Ñ‚Ð¸Ð¿Ð°Ð¼ Ð»Ð¾Ð³Ð¾Ð² -->
                        <DataTrigger Binding="{Binding Converter={StaticResource LogTypeConverter}}" Value="ERROR">
                            <Setter Property="Foreground" Value="#FF6B73"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Converter={StaticResource LogTypeConverter}}" Value="WARN">
                            <Setter Property="Foreground" Value="#FFB86C"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Converter={StaticResource LogTypeConverter}}" Value="HTTP">
                            <Setter Property="Foreground" Value="#8BE9FD"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Converter={StaticResource LogTypeConverter}}" Value="LOGIN">
                            <Setter Property="Foreground" Value="#50FA7B"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Converter={StaticResource LogTypeConverter}}" Value="UI">
                            <Setter Property="Foreground" Value="#BD93F9"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Converter={StaticResource LogTypeConverter}}" Value="PROC">
                            <Setter Property="Foreground" Value="#F1FA8C"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ðµ" Command="{Binding PlacementTarget.DataContext.CopySelectedLogsWithParamCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}" CommandParameter="{Binding PlacementTarget.SelectedItems, RelativeSource={RelativeSource AncestorType=ContextMenu}}" />
                    <Separator/>
                    <MenuItem Header="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»" Command="{Binding PlacementTarget.DataContext.OpenLogFileCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}" />
                    <MenuItem Header="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸" Command="{Binding PlacementTarget.DataContext.ClearLogsCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}" />
                </ContextMenu>
            </ListBox.ContextMenu>
        </ListBox>
    </Grid>
</UserControl>

