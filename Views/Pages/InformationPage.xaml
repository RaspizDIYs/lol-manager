<UserControl x:Class="LolManager.Views.Pages.InformationPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             xmlns:conv="clr-namespace:LolManager.Converters"
             mc:Ignorable="d">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility" />
        <conv:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibility" />
    </UserControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <StackPanel Orientation="Horizontal" Margin="6">
            <TextBlock Text="Информация о приложении" Margin="6,0,0,0" FontWeight="SemiBold"/>
        </StackPanel>
        
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Disabled" Margin="20">
            <Grid>
                <!-- Системная информация (по умолчанию) -->
                <StackPanel x:Name="InfoContent" Visibility="{Binding IsChangelogVisible, Converter={StaticResource InverseBoolToVisibility}}">
                    <!-- Заголовок -->
                    <TextBlock Text="LolManager" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,20"/>

                    <!-- Информация о версии -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,15">
                        <TextBlock Text="Версия: " FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding AppVersion}" FontWeight="Bold" Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"/>
                    </StackPanel>
                    
                    <!-- Переключатель между информацией и историей изменений -->
                    <StackPanel Margin="0,0,0,20" HorizontalAlignment="Center">
                        <ui:Button Content="Показать историю изменений" 
                                   x:Name="ToggleChangelogButton"
                                   Command="{Binding ToggleChangelogCommand}"
                                   Appearance="Transparent" 
                                   Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"/>
                    </StackPanel>

                    <!-- Дополнительная информация -->
                    <TextBlock TextWrapping="Wrap" FontFamily="Segoe UI" FontSize="12" Foreground="Gray">
                        <Run Text="LolManager - менеджер аккаунтов League of Legends"/>
                        <LineBreak/>
                        <LineBreak/>
                        <LineBreak/>
                        <Run Text="Разработано с использованием:"/>
                        <LineBreak/>
                        <Run Text="• .NET 8.0"/>
                        <LineBreak/>
                        <Run Text="• WPF + WPFUI"/>
                        <LineBreak/>
                        <Run Text="• FlaUI (UI Automation)"/>
                        <LineBreak/>
                        <Run Text="• Velopack (Auto-updates)"/>
                        <LineBreak/>
                        <Run Text="• CommunityToolkit.Mvvm"/>
                    </TextBlock>
                </StackPanel>
                
                <!-- История изменений (скрыта по умолчанию) -->
                <Grid x:Name="ChangelogContainer" Visibility="{Binding IsChangelogVisible, Converter={StaticResource BoolToVisibility}}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Заголовок с кнопкой назад -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,10">
                        <ui:Button x:Name="CloseChangelogButton" 
                                   Content="Назад" 
                                   Command="{Binding CloseChangelogCommand}"
                                   Appearance="Secondary"
                                   Icon="{ui:SymbolIcon ArrowLeft24}"
                                   VerticalAlignment="Center"
                                   Foreground="{DynamicResource SystemFillColorCriticalBrush}"
                                   ToolTip="Вернуться к информации о приложении"/>
                    </StackPanel>
                    
                    <!-- Содержимое changelog в карточке -->
                    <ui:Card Grid.Row="1" MaxWidth="500" Margin="20,0,20,20" Padding="18" HorizontalAlignment="Center" VerticalAlignment="Stretch">
                        <ScrollViewer VerticalScrollBarVisibility="Visible" Margin="10,0,-5,0">
                                                         <RichTextBox x:Name="ChangelogRichTextBox"
                                          IsReadOnly="True" 
                                          FontSize="12"
                                          Background="Transparent"
                                          BorderThickness="0"
                                          VerticalScrollBarVisibility="Disabled"
                                          Padding="0,0,10,0"/>
                        </ScrollViewer>
                    </ui:Card>
                </Grid>
            </Grid>
        </ScrollViewer>
    </Grid>
</UserControl>

